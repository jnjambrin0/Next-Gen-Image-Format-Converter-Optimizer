============================= test session starts ==============================
platform darwin -- Python 3.11.9, pytest-8.4.1, pluggy-1.6.0 -- /usr/local/bin/python3
cachedir: .pytest_cache
rootdir: /Users/jnjambrino/Projects/image_converter/backend
configfile: pytest.ini
plugins: anyio-4.9.0, asyncio-1.1.0, timeout-2.4.0, cov-6.2.1, mock-3.14.0
asyncio: mode=Mode.STRICT, asyncio_default_fixture_loop_scope=None, asyncio_default_test_loop_scope=function
timeout: 60.0s
timeout method: thread
timeout func_only: False
collecting ... collected 123 items

tests/suite_1_core_functionality/test_format_conversions_matrix.py::TestFormatConversionsMatrix::test_format_conversion_matrix[JPEG-JPEG] SKIPPED [  0%]
tests/suite_1_core_functionality/test_format_conversions_matrix.py::TestFormatConversionsMatrix::test_format_conversion_matrix[JPEG-PNG] PASSED [  1%]
tests/suite_1_core_functionality/test_format_conversions_matrix.py::TestFormatConversionsMatrix::test_format_conversion_matrix[JPEG-WebP] PASSED [  2%]
tests/suite_1_core_functionality/test_format_conversions_matrix.py::TestFormatConversionsMatrix::test_format_conversion_matrix[JPEG-AVIF] PASSED [  3%]
tests/suite_1_core_functionality/test_format_conversions_matrix.py::TestFormatConversionsMatrix::test_format_conversion_matrix[JPEG-HEIF] SKIPPED [  4%]
tests/suite_1_core_functionality/test_format_conversions_matrix.py::TestFormatConversionsMatrix::test_format_conversion_matrix[JPEG-JXL] SKIPPED [  4%]
tests/suite_1_core_functionality/test_format_conversions_matrix.py::TestFormatConversionsMatrix::test_format_conversion_matrix[JPEG-WebP2] SKIPPED [  5%]
tests/suite_1_core_functionality/test_format_conversions_matrix.py::TestFormatConversionsMatrix::test_format_conversion_matrix[PNG-JPEG] PASSED [  6%]
tests/suite_1_core_functionality/test_format_conversions_matrix.py::TestFormatConversionsMatrix::test_format_conversion_matrix[PNG-PNG] SKIPPED [  7%]
tests/suite_1_core_functionality/test_format_conversions_matrix.py::TestFormatConversionsMatrix::test_format_conversion_matrix[PNG-WebP] PASSED [  8%]
tests/suite_1_core_functionality/test_format_conversions_matrix.py::TestFormatConversionsMatrix::test_format_conversion_matrix[PNG-AVIF] PASSED [  8%]
tests/suite_1_core_functionality/test_format_conversions_matrix.py::TestFormatConversionsMatrix::test_format_conversion_matrix[PNG-HEIF] SKIPPED [  9%]
tests/suite_1_core_functionality/test_format_conversions_matrix.py::TestFormatConversionsMatrix::test_format_conversion_matrix[PNG-JXL] SKIPPED [ 10%]
tests/suite_1_core_functionality/test_format_conversions_matrix.py::TestFormatConversionsMatrix::test_format_conversion_matrix[PNG-WebP2] SKIPPED [ 11%]
tests/suite_1_core_functionality/test_format_conversions_matrix.py::TestFormatConversionsMatrix::test_format_conversion_matrix[WebP-JPEG] PASSED [ 12%]
tests/suite_1_core_functionality/test_format_conversions_matrix.py::TestFormatConversionsMatrix::test_format_conversion_matrix[WebP-PNG] PASSED [ 13%]
tests/suite_1_core_functionality/test_format_conversions_matrix.py::TestFormatConversionsMatrix::test_format_conversion_matrix[WebP-WebP] SKIPPED [ 13%]
tests/suite_1_core_functionality/test_format_conversions_matrix.py::TestFormatConversionsMatrix::test_format_conversion_matrix[WebP-AVIF] PASSED [ 14%]
tests/suite_1_core_functionality/test_format_conversions_matrix.py::TestFormatConversionsMatrix::test_format_conversion_matrix[WebP-HEIF] SKIPPED [ 15%]
tests/suite_1_core_functionality/test_format_conversions_matrix.py::TestFormatConversionsMatrix::test_format_conversion_matrix[WebP-JXL] SKIPPED [ 16%]
tests/suite_1_core_functionality/test_format_conversions_matrix.py::TestFormatConversionsMatrix::test_format_conversion_matrix[WebP-WebP2] SKIPPED [ 17%]
tests/suite_1_core_functionality/test_format_conversions_matrix.py::TestFormatConversionsMatrix::test_format_conversion_matrix[AVIF-JPEG] PASSED [ 17%]
tests/suite_1_core_functionality/test_format_conversions_matrix.py::TestFormatConversionsMatrix::test_format_conversion_matrix[AVIF-PNG] PASSED [ 18%]
tests/suite_1_core_functionality/test_format_conversions_matrix.py::TestFormatConversionsMatrix::test_format_conversion_matrix[AVIF-WebP] PASSED [ 19%]
tests/suite_1_core_functionality/test_format_conversions_matrix.py::TestFormatConversionsMatrix::test_format_conversion_matrix[AVIF-AVIF] SKIPPED [ 20%]
tests/suite_1_core_functionality/test_format_conversions_matrix.py::TestFormatConversionsMatrix::test_format_conversion_matrix[AVIF-HEIF] SKIPPED [ 21%]
tests/suite_1_core_functionality/test_format_conversions_matrix.py::TestFormatConversionsMatrix::test_format_conversion_matrix[AVIF-JXL] SKIPPED [ 21%]
tests/suite_1_core_functionality/test_format_conversions_matrix.py::TestFormatConversionsMatrix::test_format_conversion_matrix[AVIF-WebP2] SKIPPED [ 22%]
tests/suite_1_core_functionality/test_format_conversions_matrix.py::TestFormatConversionsMatrix::test_format_conversion_matrix[HEIF-JPEG] PASSED [ 23%]
tests/suite_1_core_functionality/test_format_conversions_matrix.py::TestFormatConversionsMatrix::test_format_conversion_matrix[HEIF-PNG] PASSED [ 24%]
tests/suite_1_core_functionality/test_format_conversions_matrix.py::TestFormatConversionsMatrix::test_format_conversion_matrix[HEIF-WebP] PASSED [ 25%]
tests/suite_1_core_functionality/test_format_conversions_matrix.py::TestFormatConversionsMatrix::test_format_conversion_matrix[HEIF-AVIF] PASSED [ 26%]
tests/suite_1_core_functionality/test_format_conversions_matrix.py::TestFormatConversionsMatrix::test_format_conversion_matrix[HEIF-HEIF] SKIPPED [ 26%]
tests/suite_1_core_functionality/test_format_conversions_matrix.py::TestFormatConversionsMatrix::test_format_conversion_matrix[HEIF-JXL] SKIPPED [ 27%]
tests/suite_1_core_functionality/test_format_conversions_matrix.py::TestFormatConversionsMatrix::test_format_conversion_matrix[HEIF-WebP2] SKIPPED [ 28%]
tests/suite_1_core_functionality/test_format_conversions_matrix.py::TestFormatConversionsMatrix::test_format_conversion_matrix[BMP-JPEG] PASSED [ 29%]
tests/suite_1_core_functionality/test_format_conversions_matrix.py::TestFormatConversionsMatrix::test_format_conversion_matrix[BMP-PNG] PASSED [ 30%]
tests/suite_1_core_functionality/test_format_conversions_matrix.py::TestFormatConversionsMatrix::test_format_conversion_matrix[BMP-WebP] PASSED [ 30%]
tests/suite_1_core_functionality/test_format_conversions_matrix.py::TestFormatConversionsMatrix::test_format_conversion_matrix[BMP-AVIF] PASSED [ 31%]
tests/suite_1_core_functionality/test_format_conversions_matrix.py::TestFormatConversionsMatrix::test_format_conversion_matrix[BMP-HEIF] SKIPPED [ 32%]
tests/suite_1_core_functionality/test_format_conversions_matrix.py::TestFormatConversionsMatrix::test_format_conversion_matrix[BMP-JXL] SKIPPED [ 33%]
tests/suite_1_core_functionality/test_format_conversions_matrix.py::TestFormatConversionsMatrix::test_format_conversion_matrix[BMP-WebP2] SKIPPED [ 34%]
tests/suite_1_core_functionality/test_format_conversions_matrix.py::TestFormatConversionsMatrix::test_format_conversion_matrix[TIFF-JPEG] PASSED [ 34%]
tests/suite_1_core_functionality/test_format_conversions_matrix.py::TestFormatConversionsMatrix::test_format_conversion_matrix[TIFF-PNG] PASSED [ 35%]
tests/suite_1_core_functionality/test_format_conversions_matrix.py::TestFormatConversionsMatrix::test_format_conversion_matrix[TIFF-WebP] PASSED [ 36%]
tests/suite_1_core_functionality/test_format_conversions_matrix.py::TestFormatConversionsMatrix::test_format_conversion_matrix[TIFF-AVIF] PASSED [ 37%]
tests/suite_1_core_functionality/test_format_conversions_matrix.py::TestFormatConversionsMatrix::test_format_conversion_matrix[TIFF-HEIF] SKIPPED [ 38%]
tests/suite_1_core_functionality/test_format_conversions_matrix.py::TestFormatConversionsMatrix::test_format_conversion_matrix[TIFF-JXL] SKIPPED [ 39%]
tests/suite_1_core_functionality/test_format_conversions_matrix.py::TestFormatConversionsMatrix::test_format_conversion_matrix[TIFF-WebP2] SKIPPED [ 39%]
tests/suite_1_core_functionality/test_format_conversions_matrix.py::TestFormatConversionsMatrix::test_format_conversion_matrix[GIF-JPEG] PASSED [ 40%]
tests/suite_1_core_functionality/test_format_conversions_matrix.py::TestFormatConversionsMatrix::test_format_conversion_matrix[GIF-PNG] PASSED [ 41%]
tests/suite_1_core_functionality/test_format_conversions_matrix.py::TestFormatConversionsMatrix::test_format_conversion_matrix[GIF-WebP] PASSED [ 42%]
tests/suite_1_core_functionality/test_format_conversions_matrix.py::TestFormatConversionsMatrix::test_format_conversion_matrix[GIF-AVIF] PASSED [ 43%]
tests/suite_1_core_functionality/test_format_conversions_matrix.py::TestFormatConversionsMatrix::test_format_conversion_matrix[GIF-HEIF] SKIPPED [ 43%]
tests/suite_1_core_functionality/test_format_conversions_matrix.py::TestFormatConversionsMatrix::test_format_conversion_matrix[GIF-JXL] SKIPPED [ 44%]
tests/suite_1_core_functionality/test_format_conversions_matrix.py::TestFormatConversionsMatrix::test_format_conversion_matrix[GIF-WebP2] SKIPPED [ 45%]
tests/suite_1_core_functionality/test_format_conversions_matrix.py::TestFormatConversionsMatrix::test_edge_case_dimensions PASSED [ 46%]
tests/suite_1_core_functionality/test_format_conversions_matrix.py::TestFormatConversionsMatrix::test_color_depth_variations PASSED [ 47%]
tests/suite_1_core_functionality/test_format_conversions_matrix.py::TestFormatConversionsMatrix::test_animated_gif_handling PASSED [ 47%]
tests/suite_1_core_functionality/test_format_conversions_matrix.py::TestFormatConversionsMatrix::test_transparency_preservation PASSED [ 48%]
tests/suite_1_core_functionality/test_format_conversions_matrix.py::TestFormatConversionsMatrix::test_metadata_handling_in_conversion PASSED [ 49%]
tests/suite_1_core_functionality/test_ml_classification_quality.py::TestMLClassification::test_classification_accuracy_all_types FAILED [ 50%]
tests/suite_1_core_functionality/test_ml_classification_quality.py::TestMLClassification::test_face_detection_accuracy FAILED [ 51%]
tests/suite_1_core_functionality/test_ml_classification_quality.py::TestMLClassification::test_text_detection_accuracy FAILED [ 52%]
tests/suite_1_core_functionality/test_ml_classification_quality.py::TestMLClassification::test_classification_edge_cases PASSED [ 52%]
tests/suite_1_core_functionality/test_ml_classification_quality.py::TestMLClassification::test_classification_performance FAILED [ 53%]
tests/suite_1_core_functionality/test_ml_classification_quality.py::TestQualityOptimization::test_quality_levels_compression FAILED [ 54%]
tests/suite_1_core_functionality/test_ml_classification_quality.py::TestQualityOptimization::test_format_specific_optimization FAILED [ 55%]
tests/suite_1_core_functionality/test_ml_classification_quality.py::TestQualityOptimization::test_intelligent_format_selection PASSED [ 56%]
tests/suite_1_core_functionality/test_ml_classification_quality.py::TestQualityOptimization::test_preset_optimization PASSED [ 56%]
tests/suite_1_core_functionality/test_ml_classification_quality.py::TestQualityOptimization::test_batch_optimization PASSED [ 57%]
tests/suite_2_security_privacy/test_security_sandboxing_malicious.py::TestSecuritySandboxing::test_process_isolation_file_access PASSED [ 58%]
tests/suite_2_security_privacy/test_security_sandboxing_malicious.py::TestSecuritySandboxing::test_network_isolation_complete SKIPPED [ 59%]
tests/suite_2_security_privacy/test_security_sandboxing_malicious.py::TestSecuritySandboxing::test_resource_limits_enforcement FAILED [ 60%]
tests/suite_2_security_privacy/test_security_sandboxing_malicious.py::TestSecuritySandboxing::test_sandbox_command_injection_prevention PASSED [ 60%]
tests/suite_2_security_privacy/test_security_sandboxing_malicious.py::TestSecuritySandboxing::test_sandbox_escape_attempts PASSED [ 61%]
tests/suite_2_security_privacy/test_security_sandboxing_malicious.py::TestSecuritySandboxing::test_memory_bomb_protection PASSED [ 62%]
tests/suite_2_security_privacy/test_security_sandboxing_malicious.py::TestMetadataPrivacy::test_complete_metadata_removal PASSED [ 63%]
tests/suite_2_security_privacy/test_security_sandboxing_malicious.py::TestMetadataPrivacy::test_gps_location_removal PASSED [ 64%]
tests/suite_2_security_privacy/test_security_sandboxing_malicious.py::TestMetadataPrivacy::test_partial_metadata_preservation PASSED [ 65%]
tests/suite_2_security_privacy/test_security_sandboxing_malicious.py::TestMetadataPrivacy::test_metadata_injection_attempts PASSED [ 65%]
tests/suite_2_security_privacy/test_security_sandboxing_malicious.py::TestMetadataPrivacy::test_metadata_size_limits PASSED [ 66%]
tests/suite_2_security_privacy/test_security_sandboxing_malicious.py::TestMaliciousInputHandling::test_corrupted_file_formats FAILED [ 67%]
tests/suite_2_security_privacy/test_security_sandboxing_malicious.py::TestMaliciousInputHandling::test_malicious_payloads PASSED [ 68%]
tests/suite_2_security_privacy/test_security_sandboxing_malicious.py::TestMaliciousInputHandling::test_path_traversal_prevention PASSED [ 69%]
tests/suite_2_security_privacy/test_security_sandboxing_malicious.py::TestMaliciousInputHandling::test_polyglot_file_detection PASSED [ 69%]
tests/suite_2_security_privacy/test_security_sandboxing_malicious.py::TestMaliciousInputHandling::test_infinite_loop_prevention PASSED [ 70%]
tests/suite_2_security_privacy/test_security_sandboxing_malicious.py::TestMaliciousInputHandling::test_format_confusion_attacks PASSED [ 71%]
tests/suite_3_concurrency_performance/test_batch_websocket_stress.py::TestBatchProcessing::test_batch_100_files_processing FAILED [ 72%]
tests/suite_3_concurrency_performance/test_batch_websocket_stress.py::TestBatchProcessing::test_batch_mixed_formats_sizes FAILED [ 73%]
tests/suite_3_concurrency_performance/test_batch_websocket_stress.py::TestBatchProcessing::test_batch_error_handling_partial_failures FAILED [ 73%]
tests/suite_3_concurrency_performance/test_batch_websocket_stress.py::TestBatchProcessing::test_batch_cancellation FAILED [ 74%]
tests/suite_3_concurrency_performance/test_batch_websocket_stress.py::TestBatchProcessing::test_batch_individual_file_cancellation FAILED [ 75%]
tests/suite_3_concurrency_performance/test_batch_websocket_stress.py::TestWebSocketRealTime::test_websocket_progress_updates FAILED [ 76%]
tests/suite_3_concurrency_performance/test_batch_websocket_stress.py::TestWebSocketRealTime::test_websocket_authentication FAILED [ 77%]
tests/suite_3_concurrency_performance/test_batch_websocket_stress.py::TestWebSocketRealTime::test_websocket_concurrent_connections FAILED [ 78%]
tests/suite_3_concurrency_performance/test_batch_websocket_stress.py::TestWebSocketRealTime::test_websocket_reconnection_handling FAILED [ 78%]
tests/suite_3_concurrency_performance/test_batch_websocket_stress.py::TestConcurrentStress::test_50_concurrent_clients FAILED [ 79%]
tests/suite_3_concurrency_performance/test_batch_websocket_stress.py::TestConcurrentStress::test_memory_stability_under_load FAILED [ 80%]
tests/suite_3_concurrency_performance/test_batch_websocket_stress.py::TestConcurrentStress::test_cpu_throttling_under_stress FAILED [ 81%]

=================================== FAILURES ===================================
_________ TestMLClassification.test_classification_accuracy_all_types __________
tests/suite_1_core_functionality/test_ml_classification_quality.py:146: in test_classification_accuracy_all_types
    assert result.get('content_type') == expected_type, \
E   AssertionError: digital_art: Expected illustration, got photo
E   assert 'photo' == 'illustration'
E     
E     - illustration
E     + photo
______________ TestMLClassification.test_face_detection_accuracy _______________
tests/suite_1_core_functionality/test_ml_classification_quality.py:196: in test_face_detection_accuracy
    assert abs(detected_faces - expected_faces) <= tolerance, \
E   AssertionError: Expected 2 faces, detected 0
E   assert 2 <= 1
E    +  where 2 = abs((0 - 2))
______________ TestMLClassification.test_text_detection_accuracy _______________
tests/suite_1_core_functionality/test_ml_classification_quality.py:224: in test_text_detection_accuracy
    assert detected_text or text_regions > 0, "Failed to detect text"
E   AssertionError: Failed to detect text
E   assert (False or 0 > 0)
_____________ TestMLClassification.test_classification_performance _____________
tests/suite_1_core_functionality/test_ml_classification_quality.py:280: in test_classification_performance
    assert avg_time < 0.5, f"Average response time too high: {avg_time:.3f}s"
E   AssertionError: Average response time too high: 1.504s
E   assert 1.5039500713348388 < 0.5
___________ TestQualityOptimization.test_quality_levels_compression ____________
tests/suite_1_core_functionality/test_ml_classification_quality.py:722: in test_quality_levels_compression
    assert response.status_code == 200
E   assert 404 == 200
E    +  where 404 = <Response [404 Not Found]>.status_code
__________ TestQualityOptimization.test_format_specific_optimization ___________
tests/suite_1_core_functionality/test_ml_classification_quality.py:796: in test_format_specific_optimization
    assert results['jpeg']['success'], "JPEG optimization failed"
E   AssertionError: JPEG optimization failed
E   assert False
___________ TestSecuritySandboxing.test_resource_limits_enforcement ____________
tests/suite_2_security_privacy/test_security_sandboxing_malicious.py:146: in test_resource_limits_enforcement
    assert report['memory_increase_mb'] < 500, \
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   KeyError: 'memory_increase_mb'
____________ TestMaliciousInputHandling.test_corrupted_file_formats ____________
tests/suite_2_security_privacy/test_security_sandboxing_malicious.py:759: in test_corrupted_file_formats
    assert response.status_code in [200, 400, 415, 422], \
E   AssertionError: Unexpected response for corrupt.jpg: 500
E   assert 500 in [200, 400, 415, 422]
E    +  where 500 = <Response [500 Internal Server Error]>.status_code
_____________ TestBatchProcessing.test_batch_100_files_processing ______________
tests/suite_3_concurrency_performance/test_batch_websocket_stress.py:85: in test_batch_100_files_processing
    batch_response = await client.post(
/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/httpx/_client.py:1859: in post
    return await self.request(
/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/httpx/_client.py:1540: in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/httpx/_client.py:1629: in send
    response = await self._send_handling_auth(
/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/httpx/_client.py:1657: in _send_handling_auth
    response = await self._send_handling_redirects(
/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/httpx/_client.py:1694: in _send_handling_redirects
    response = await self._send_single_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/httpx/_client.py:1730: in _send_single_request
    response = await transport.handle_async_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/httpx/_transports/default.py:394: in handle_async_request
    resp = await self._pool.handle_async_request(req)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/httpcore/_async/connection_pool.py:256: in handle_async_request
    raise exc from None
/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/httpcore/_async/connection_pool.py:236: in handle_async_request
    response = await connection.handle_async_request(
/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/httpcore/_async/connection.py:103: in handle_async_request
    return await self._connection.handle_async_request(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/httpcore/_async/http11.py:136: in handle_async_request
    raise exc
/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/httpcore/_async/http11.py:88: in handle_async_request
    await self._send_request_body(**kwargs)
/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/httpcore/_async/http11.py:157: in _send_request_body
    async for chunk in request.stream:
/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/httpx/_multipart.py:299: in __aiter__
    for chunk in self.iter_chunks():
/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/httpx/_multipart.py:261: in iter_chunks
    yield from field.render()
/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/httpx/_multipart.py:221: in render
    yield from self.render_data()
/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/httpx/_multipart.py:214: in render_data
    chunk = self.file.read(self.CHUNK_SIZE)
            ^^^^^^^^^^^^^^
E   AttributeError: 'dict' object has no attribute 'read'
______________ TestBatchProcessing.test_batch_mixed_formats_sizes ______________
tests/suite_3_concurrency_performance/test_batch_websocket_stress.py:162: in test_batch_mixed_formats_sizes
    batch_id = batch_response.json()['job_id']
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   KeyError: 'job_id'
________ TestBatchProcessing.test_batch_error_handling_partial_failures ________
tests/suite_3_concurrency_performance/test_batch_websocket_stress.py:224: in test_batch_error_handling_partial_failures
    batch_id = batch_response.json()['job_id']
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   KeyError: 'job_id'
_________________ TestBatchProcessing.test_batch_cancellation __________________
tests/suite_3_concurrency_performance/test_batch_websocket_stress.py:261: in test_batch_cancellation
    batch_id = batch_response.json()['job_id']
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   KeyError: 'job_id'
_________ TestBatchProcessing.test_batch_individual_file_cancellation __________
tests/suite_3_concurrency_performance/test_batch_websocket_stress.py:302: in test_batch_individual_file_cancellation
    batch_id = batch_response.json()['job_id']
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   KeyError: 'job_id'
____________ TestWebSocketRealTime.test_websocket_progress_updates _____________
tests/suite_3_concurrency_performance/test_batch_websocket_stress.py:434: in test_websocket_progress_updates
    batch_id = batch_response.json()['job_id']
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   KeyError: 'job_id'
_____________ TestWebSocketRealTime.test_websocket_authentication ______________
tests/suite_3_concurrency_performance/test_batch_websocket_stress.py:499: in test_websocket_authentication
    batch_id = batch_response.json()['job_id']
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   KeyError: 'job_id'
_________ TestWebSocketRealTime.test_websocket_concurrent_connections __________
tests/suite_3_concurrency_performance/test_batch_websocket_stress.py:545: in test_websocket_concurrent_connections
    batch_id = batch_response.json()['job_id']
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   KeyError: 'job_id'
__________ TestWebSocketRealTime.test_websocket_reconnection_handling __________
tests/suite_3_concurrency_performance/test_batch_websocket_stress.py:603: in test_websocket_reconnection_handling
    batch_id = batch_response.json()['job_id']
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   KeyError: 'job_id'
_______________ TestConcurrentStress.test_50_concurrent_clients ________________
tests/suite_3_concurrency_performance/test_batch_websocket_stress.py:669: in test_50_concurrent_clients
    assert success_rate >= 0.95, f"Success rate too low: {success_rate:.2%}"
E   AssertionError: Success rate too low: 0.00%
E   assert 0.0 >= 0.95
____________ TestConcurrentStress.test_memory_stability_under_load _____________
tests/suite_3_concurrency_performance/test_batch_websocket_stress.py:704: in test_memory_stability_under_load
    assert successful >= 90, f"Too many failures: {100 - successful}"
E   AssertionError: Too many failures: 96
E   assert 4 >= 90
____________ TestConcurrentStress.test_cpu_throttling_under_stress _____________
tests/suite_3_concurrency_performance/test_batch_websocket_stress.py:749: in test_cpu_throttling_under_stress
    assert successful >= 5, "Too few successful conversions"
E   AssertionError: Too few successful conversions
E   assert 4 >= 5
=========================== short test summary info ============================
FAILED tests/suite_1_core_functionality/test_ml_classification_quality.py::TestMLClassification::test_classification_accuracy_all_types - AssertionError: digital_art: Expected illustration, got photo
assert 'photo' == 'illustration'
  
  - illustration
  + photo
FAILED tests/suite_1_core_functionality/test_ml_classification_quality.py::TestMLClassification::test_face_detection_accuracy - AssertionError: Expected 2 faces, detected 0
assert 2 <= 1
 +  where 2 = abs((0 - 2))
FAILED tests/suite_1_core_functionality/test_ml_classification_quality.py::TestMLClassification::test_text_detection_accuracy - AssertionError: Failed to detect text
assert (False or 0 > 0)
FAILED tests/suite_1_core_functionality/test_ml_classification_quality.py::TestMLClassification::test_classification_performance - AssertionError: Average response time too high: 1.504s
assert 1.5039500713348388 < 0.5
FAILED tests/suite_1_core_functionality/test_ml_classification_quality.py::TestQualityOptimization::test_quality_levels_compression - assert 404 == 200
 +  where 404 = <Response [404 Not Found]>.status_code
FAILED tests/suite_1_core_functionality/test_ml_classification_quality.py::TestQualityOptimization::test_format_specific_optimization - AssertionError: JPEG optimization failed
assert False
FAILED tests/suite_2_security_privacy/test_security_sandboxing_malicious.py::TestSecuritySandboxing::test_resource_limits_enforcement - KeyError: 'memory_increase_mb'
FAILED tests/suite_2_security_privacy/test_security_sandboxing_malicious.py::TestMaliciousInputHandling::test_corrupted_file_formats - AssertionError: Unexpected response for corrupt.jpg: 500
assert 500 in [200, 400, 415, 422]
 +  where 500 = <Response [500 Internal Server Error]>.status_code
FAILED tests/suite_3_concurrency_performance/test_batch_websocket_stress.py::TestBatchProcessing::test_batch_100_files_processing - AttributeError: 'dict' object has no attribute 'read'
FAILED tests/suite_3_concurrency_performance/test_batch_websocket_stress.py::TestBatchProcessing::test_batch_mixed_formats_sizes - KeyError: 'job_id'
FAILED tests/suite_3_concurrency_performance/test_batch_websocket_stress.py::TestBatchProcessing::test_batch_error_handling_partial_failures - KeyError: 'job_id'
FAILED tests/suite_3_concurrency_performance/test_batch_websocket_stress.py::TestBatchProcessing::test_batch_cancellation - KeyError: 'job_id'
FAILED tests/suite_3_concurrency_performance/test_batch_websocket_stress.py::TestBatchProcessing::test_batch_individual_file_cancellation - KeyError: 'job_id'
FAILED tests/suite_3_concurrency_performance/test_batch_websocket_stress.py::TestWebSocketRealTime::test_websocket_progress_updates - KeyError: 'job_id'
FAILED tests/suite_3_concurrency_performance/test_batch_websocket_stress.py::TestWebSocketRealTime::test_websocket_authentication - KeyError: 'job_id'
FAILED tests/suite_3_concurrency_performance/test_batch_websocket_stress.py::TestWebSocketRealTime::test_websocket_concurrent_connections - KeyError: 'job_id'
FAILED tests/suite_3_concurrency_performance/test_batch_websocket_stress.py::TestWebSocketRealTime::test_websocket_reconnection_handling - KeyError: 'job_id'
FAILED tests/suite_3_concurrency_performance/test_batch_websocket_stress.py::TestConcurrentStress::test_50_concurrent_clients - AssertionError: Success rate too low: 0.00%
assert 0.0 >= 0.95
FAILED tests/suite_3_concurrency_performance/test_batch_websocket_stress.py::TestConcurrentStress::test_memory_stability_under_load - AssertionError: Too many failures: 96
assert 4 >= 90
FAILED tests/suite_3_concurrency_performance/test_batch_websocket_stress.py::TestConcurrentStress::test_cpu_throttling_under_stress - AssertionError: Too few successful conversions
assert 4 >= 5
!!!!!!!!!!!!!!!!!!!!!!!!!! stopping after 20 failures !!!!!!!!!!!!!!!!!!!!!!!!!!
============ 20 failed, 51 passed, 29 skipped in 255.07s (0:04:15) =============
